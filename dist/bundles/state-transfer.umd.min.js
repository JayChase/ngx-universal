(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@angular/core"),require("rxjs/Observable"),require("rxjs/add/observable/fromPromise"),require("rxjs/add/operator/do"),require("rxjs/add/operator/map")):"function"==typeof define&&define.amd?define(["@angular/core","rxjs/Observable","rxjs/add/observable/fromPromise","rxjs/add/operator/do","rxjs/add/operator/map"],e):"object"==typeof exports?exports["ngx-universal"]=e(require("@angular/core"),require("rxjs/Observable"),require("rxjs/add/observable/fromPromise"),require("rxjs/add/operator/do"),require("rxjs/add/operator/map")):t["ngx-universal"]=e(t["@angular/core"],t["rxjs/Observable"],t["rxjs/add/observable/fromPromise"],t["rxjs/add/operator/do"],t["rxjs/add/operator/map"])})(this,function(t,e,r,o,n){return function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=4)}([function(e,r){e.exports=t},function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var u=t.length-1;u>=0;u--)(n=t[u])&&(a=(i<3?n(a):i>3?n(e,r,a):n(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};e.__esModule=!0;var n=r(0),i=function(){function t(){this.state=new Map}return t.prototype.initialize=function(t){var e=this;Object.keys(t).forEach(function(r){e.set(r,t[r])})},t.prototype.get=function(t){return this.state.get(t)},t.prototype.set=function(t,e){return this.state.set(t,e)},t.prototype.inject=function(){},t.prototype.toJson=function(){var t=this,e={};return Array.from(this.state.keys()).forEach(function(r){e[r]=t.get(r)}),e},t}();i=o([n.Injectable()],i),e.StateTransferService=i},function(t,e,r){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var u=t.length-1;u>=0;u--)(n=t[u])&&(a=(i<3?n(a):i>3?n(e,r,a):n(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},i=this&&this.__param||function(t,e){return function(r,o){e(r,o,t)}};e.__esModule=!0;var a=r(0),u=r(1);e.STATE_ID=new a.InjectionToken("STATE_ID"),e.DEFAULT_STATE_ID="STATE";var s=function(t){function e(e,r,o){var n=t.call(this)||this;return n.stateId=e,n.platformState=r,n.rendererFactory=o,n}return o(e,t),e.prototype.inject=function(){try{var t=this.platformState.getDocument(),e=JSON.stringify(this.toJson()),r=this.rendererFactory.createRenderer(t,{id:"-1",encapsulation:a.ViewEncapsulation.None,styles:[],data:{}}),o=Array.from(t.children).find(function(t){return"html"===t.name}),n=Array.from(o.children).find(function(t){return"head"===t.name});if(!n)throw new Error("<head> not found in the document");var i=r.createElement("script");r.setValue(i,"window['"+this.stateId+"'] = "+e),r.appendChild(n,i)}catch(t){console.error(t)}},e}(u.StateTransferService);s=n([a.Injectable(),i(0,a.Inject(e.STATE_ID))],s),e.ServerStateTransferService=s},function(t,e,r){"use strict";var o=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var u=t.length-1;u>=0;u--)(n=t[u])&&(a=(i<3?n(a):i>3?n(e,r,a):n(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};e.__esModule=!0;var n=r(0),i=r(5);r(6),r(7),r(8);var a=function(){function t(t,e){this.http=t,this.stateTransfer=e}return t.prototype.request=function(t,e){var r=this;return this.getData(t,e,function(t,e){return r.http.request(t,e)})},t.prototype.get=function(t,e){var r=this;return this.getData(t,e,function(t,e){return r.http.get(t,e)})},t.prototype.post=function(t,e,r){var o=this;return this.getPostData(t,e,r,function(t){return o.http.post(t,e,r)})},t.prototype.put=function(t,e,r){var o=this;return this.getData(t,r,function(t,e){return o.http.put(t,e)})},t.prototype.delete=function(t,e){var r=this;return this.getData(t,e,function(t,e){return r.http.delete(t,e)})},t.prototype.patch=function(t,e,r){var o=this;return this.getPostData(t,e,r,function(t){return o.http.patch(t,e,r)})},t.prototype.head=function(t,e){var r=this;return this.getData(t,e,function(t,e){return r.http.head(t,e)})},t.prototype.options=function(t,e){var r=this;return this.getData(t,e,function(t,e){return r.http.options(t,e)})},t.prototype.getData=function(t,e,r){var o=this,n=t;"string"!=typeof t&&(n=t.url);var i=n+JSON.stringify(e);try{return this.resolveData(i)}catch(n){return r(t,e).map(function(t){return t.json()}).do(function(t){o.setCache(i,t)})}},t.prototype.getPostData=function(t,e,r,o){var n=this,i=t;"string"!=typeof t&&(i=t.url);var a=i+JSON.stringify(e)+JSON.stringify(r);try{return this.resolveData(a)}catch(i){return o(t,e,r).map(function(t){return t.json()}).do(function(t){n.setCache(a,t)})}},t.prototype.resolveData=function(t){var e=this.getFromCache(t);if(!e)throw new Error;return i.Observable.fromPromise(Promise.resolve(e))},t.prototype.setCache=function(t,e){return this.stateTransfer.set(t,e)},t.prototype.getFromCache=function(t){return this.stateTransfer.get(t)},t}();a=o([n.Injectable()],a),e.HttpTransferService=a},function(t,e,r){"use strict";function o(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}function n(t){var e=new f.StateTransferService;return e.initialize(window[t]||{}),e}var i=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var u=t.length-1;u>=0;u--)(n=t[u])&&(a=(i<3?n(a):i>3?n(e,r,a):n(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__param||function(t,e){return function(r,o){e(r,o,t)}};e.__esModule=!0;var u=r(0),s=r(2),c=r(3),f=r(1);o(r(2)),o(r(1)),o(r(3)),e.stateTransferFactory=n;var p=h=function(){function t(t){if(t)throw new Error("HttpTransferModule already loaded; import in root module only.")}return t.forRoot=function(){return{ngModule:h}},t}();p=h=i([u.NgModule({providers:[c.HttpTransferService]}),a(0,u.Optional()),a(0,u.SkipSelf())],p),e.HttpTransferModule=p;var l=v=function(){function t(t){if(t)throw new Error("BrowserStateTransferModule already loaded; import in BROWSER module only.")}return t.forRoot=function(t){return void 0===t&&(t=s.DEFAULT_STATE_ID),{ngModule:v,providers:[{provide:f.StateTransferService,useFactory:n,deps:[s.STATE_ID]},{provide:s.STATE_ID,useValue:t}]}},t}();l=v=i([u.NgModule(),a(0,u.Optional()),a(0,u.SkipSelf())],l),e.BrowserStateTransferModule=l;var d=y=function(){function t(t){if(t)throw new Error("ServerStateTransferModule already loaded; import in SERVER module only.")}return t.forRoot=function(t){return void 0===t&&(t=s.DEFAULT_STATE_ID),{ngModule:y,providers:[{provide:s.STATE_ID,useValue:t}]}},t}();d=y=i([u.NgModule({providers:[{provide:f.StateTransferService,useClass:s.ServerStateTransferService}]}),a(0,u.Optional()),a(0,u.SkipSelf())],d),e.ServerStateTransferModule=d;var h,v,y},function(t,r){t.exports=e},function(t,e){t.exports=r},function(t,e){t.exports=o},function(t,e){t.exports=n}])});